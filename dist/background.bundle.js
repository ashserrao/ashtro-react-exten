(()=>{let e=[],t=null,c=!1,o=[];function r(){return chrome.tabs.query({active:!0,currentWindow:!0},(function(e){e.length>0&&(t=e[0].id,console.log("Recorded active Tab ID: ",t))})),!0}function n(){const e="chrome-extension://".concat(chrome.runtime.id,"/recording.html");chrome.tabs.query({url:e},(function(t){t.length>0?chrome.tabs.update(t[0].id,{active:!0}):chrome.tabs.create({url:e})}))}console.log("background.js is working"),chrome.runtime.onMessage.addListener(((a,i,s)=>{"recording-page"===a.action?(r(),n(),s("page triggered")):"id-cards"===a.action||"face-capture"===a.action?(a.data.forEach((t=>{e.push(t)})),console.log(e),s("received "+("id-cards"===a.action?"ID's":"Face photo"))):"record-tab"===a.action?(r(),s("recorded-tab")):"switch-tab"===a.action?(null!==t&&chrome.tabs.update(t,{active:!0},(function(e){chrome.runtime.lastError?console.error("Error switching back to the previous tab: ",chrome.runtime.lastError):console.log("Switched back to Tab ID: ",t)})),s("switched-tab")):"check-recording-status"===a.action?s(c):"switch-recording-status"===a.action?(n(),console.log(c)):"getFlags"===a.action?o&&(s(o[0]),o.shift()):"sendFlags"===a.action?(o.push(a.data),s("Flag received.")):"content-blocked"===a.action&&function(){const e="chrome-extension://".concat(chrome.runtime.id,"/contact.html");chrome.tabs.query({url:e},(function(t){t.length>0?chrome.tabs.update(t[0].id,{active:!0}):chrome.tabs.create({url:e})}))}()}))})();