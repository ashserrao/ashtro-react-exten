// chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
//   if (message.action === "trigger") {
//     createCamera();
//     console.log("working");
//   }
// });

// function createCamera() {
//   const divId = "draggableDiv";
//   let draggableDiv = document.getElementById(divId); // Use let for reassignment

//   if (draggableDiv) {
//     console.log("already active");
//   } else {
//     // Create the full-screen transparent canvas
//     const canvas = document.createElement("canvas");
//     canvas.id = "transparentCanvas";
//     canvas.width = window.innerWidth;
//     canvas.height = window.innerHeight;
//     canvas.style.position = "fixed";
//     canvas.style.top = "0";
//     canvas.style.left = "0";
//     canvas.style.width = "100%";
//     canvas.style.height = "100%";
//     canvas.style.zIndex = "999998";
//     canvas.style.pointerEvents = "none"; // Allow clicks to pass through
//     document.body.appendChild(canvas);

//     // Add a small, draggable div
//     draggableDiv = document.createElement("div");
//     draggableDiv.id = divId;
//     draggableDiv.style.position = "fixed";
//     draggableDiv.style.width = "250px";
//     draggableDiv.style.height = "400px";
//     draggableDiv.style.background = "#F6F5F2";
//     draggableDiv.style.zIndex = "999999";
//     draggableDiv.style.top = "50%";
//     draggableDiv.style.left = "50%";
//     draggableDiv.style.borderRadius = "10px";
//     // draggableDiv.style.transform = "translate(-50%, -50%)";
//     draggableDiv.style.cursor = "move";
//     document.body.appendChild(draggableDiv);

//     // Make the div draggable
//     draggableDiv.onmousedown = function (event) {
//       let shiftX = event.clientX - draggableDiv.getBoundingClientRect().left;
//       let shiftY = event.clientY - draggableDiv.getBoundingClientRect().top;

//       function moveAt(pageX, pageY) {
//         // Calculate new positions
//         let newLeft = pageX - shiftX;
//         let newTop = pageY - shiftY;

//         // Boundary checks
//         if (newLeft < 0) newLeft = 0;
//         if (newTop < 0) newTop = 0;
//         if (newLeft + draggableDiv.offsetWidth > canvas.width)
//           newLeft = canvas.width - draggableDiv.offsetWidth;
//         if (newTop + draggableDiv.offsetHeight > canvas.height)
//           newTop = canvas.height - draggableDiv.offsetHeight;

//         // Set new positions
//         draggableDiv.style.left = newLeft + "px";
//         draggableDiv.style.top = newTop + "px";
//       }

//       function onMouseMove(event) {
//         moveAt(event.pageX, event.pageY);
//       }

//       // Move the div when the mouse moves
//       document.addEventListener("mousemove", onMouseMove);

//       // Remove the mousemove listener when the mouse button is released
//       document.onmouseup = function () {
//         document.removeEventListener("mousemove", onMouseMove);
//         document.onmouseup = null;
//       };

//       // Prevent default dragging of the element
//       draggableDiv.ondragstart = function () {
//         return false;
//       };
//     };
//   }
// }
